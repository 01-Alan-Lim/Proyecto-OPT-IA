{"ast":null,"code":"var _jsxFileName = \"/home/university/Escritorio/Inteligencia Artificial/Proyecto 2 - Alan Limachi/Proyecto-Agente-IA/frontend/src/pages/ChatPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Typography } from '@mui/material';\nimport Sidebar from '../components/slidebar/Slidebar';\nimport ChatArea from '../components/chat/ChatArea';\nimport useChat from '../hooks/useChat';\nimport useChatHistory from '../hooks/useChatHistory';\nimport '../styles/chatPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPage = ({\n  userId = 'default-user'\n}) => {\n  _s();\n  const {\n    messages,\n    isLoading,\n    error,\n    sendMessage,\n    loadChat,\n    setMessages\n  } = useChat(userId);\n  const handleSendToChat = content => {\n    const newMessage = {\n      role: 'assistant',\n      content: content,\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, newMessage]);\n  };\n  const {\n    chatHistory,\n    currentChatId,\n    setCurrentChatId,\n    setChatHistory\n  } = useChatHistory(userId);\n  const handleSubmit = async input => {\n    const chatId = await sendMessage(input, currentChatId);\n    if (!currentChatId) {\n      setChatHistory(prev => {\n        var _messages$, _messages$$content;\n        return [{\n          id: chatId,\n          title: input.substring(0, 30) + (input.length > 30 ? '...' : ''),\n          lastMessage: ((_messages$ = messages[0]) === null || _messages$ === void 0 ? void 0 : (_messages$$content = _messages$.content) === null || _messages$$content === void 0 ? void 0 : _messages$$content.substring(0, 50)) + '...' || 'Nuevo chat',\n          timestamp: new Date().toISOString()\n        }, ...prev];\n      });\n    }\n    setCurrentChatId(chatId);\n  };\n  const handleLoadChat = async chatId => {\n    await loadChat(chatId);\n    setCurrentChatId(chatId);\n  };\n  const handleNewChat = () => {\n    setMessages([]);\n    setCurrentChatId(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      chats: chatHistory,\n      currentChatId: currentChatId,\n      onSelectChat: handleLoadChat,\n      onNewChat: handleNewChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatArea, {\n      messages: messages,\n      isLoading: isLoading,\n      error: error,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPage, \"fKOcytV5zGROExIqlxKEFHGuKh8=\", false, function () {\n  return [useChat, useChatHistory];\n});\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","Typography","Sidebar","ChatArea","useChat","useChatHistory","jsxDEV","_jsxDEV","ChatPage","userId","_s","messages","isLoading","error","sendMessage","loadChat","setMessages","handleSendToChat","content","newMessage","role","timestamp","Date","toISOString","prev","chatHistory","currentChatId","setCurrentChatId","setChatHistory","handleSubmit","input","chatId","_messages$","_messages$$content","id","title","substring","length","lastMessage","handleLoadChat","handleNewChat","className","children","chats","onSelectChat","onNewChat","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","_c","$RefreshReg$"],"sources":["/home/university/Escritorio/Inteligencia Artificial/Proyecto 2 - Alan Limachi/Proyecto-Agente-IA/frontend/src/pages/ChatPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Typography } from '@mui/material';\nimport Sidebar from '../components/slidebar/Slidebar';\nimport ChatArea from '../components/chat/ChatArea';\nimport useChat from '../hooks/useChat';\nimport useChatHistory from '../hooks/useChatHistory';\nimport '../styles/chatPage.css';\n\nconst ChatPage = ({ userId = 'default-user' }) => {\n  const { \n    messages, \n    isLoading, \n    error, \n    sendMessage, \n    loadChat, \n    setMessages \n  } = useChat(userId);\n    const handleSendToChat = (content) => {\n    const newMessage = {\n      role: 'assistant',\n      content: content,\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, newMessage]);\n  };\n\n  const { \n    chatHistory, \n    currentChatId, \n    setCurrentChatId, \n    setChatHistory \n  } = useChatHistory(userId);\n\n  const handleSubmit = async (input) => {\n    const chatId = await sendMessage(input, currentChatId);\n    \n    if (!currentChatId) {\n      setChatHistory(prev => [{\n        id: chatId,\n        title: input.substring(0, 30) + (input.length > 30 ? '...' : ''),\n        lastMessage: messages[0]?.content?.substring(0, 50) + '...' || 'Nuevo chat',\n        timestamp: new Date().toISOString()\n      }, ...prev]);\n    }\n    \n    setCurrentChatId(chatId);\n  };\n\n  const handleLoadChat = async (chatId) => {\n    await loadChat(chatId);\n    setCurrentChatId(chatId);\n  };\n\n  const handleNewChat = () => {\n    setMessages([]);\n    setCurrentChatId(null);\n  };\n\n  return (\n    <div className=\"chat-page-container\">\n      <Sidebar\n        chats={chatHistory}\n        currentChatId={currentChatId}\n        onSelectChat={handleLoadChat}\n        onNewChat={handleNewChat}\n      />\n      \n      <ChatArea\n        messages={messages}\n        isLoading={isLoading}\n        error={error}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default ChatPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}